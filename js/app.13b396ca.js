(function(){"use strict";var e={122:function(e,t,i){var o=i(963),s=i(252);const l=(0,s._)("div",{class:"p-5"},[(0,s._)("h1",null,"Some title test"),(0,s._)("p",{class:"fs-4"},"Some title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text here")],-1),n={class:"container-fluid"},r={class:"row"},a=(0,s._)("div",{class:"col-md-6"},[(0,s._)("div",{class:"p-5"},[(0,s._)("h1",null,"test title"),(0,s._)("p",{class:"fs-4"},"Some title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text here")])],-1),m={class:"col-md-6"},h=(0,s._)("div",{class:"container-fluid"},[(0,s._)("div",{class:"row"},[(0,s._)("div",{class:"col-md-2"}),(0,s._)("div",{class:"col-md-8"},[(0,s._)("div",{class:"p-5"},[(0,s._)("h1",null,"Test Scroll in a Page"),(0,s._)("p",{class:"fs-4"},"Some title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome Some title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome "),(0,s._)("p",{class:"fs-4"},"Some title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome Some title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome "),(0,s._)("p",{class:"fs-4"},"Some title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome Some title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text hereSome ")])]),(0,s._)("div",{class:"col-md-2"})])],-1),u=(0,s._)("div",{class:"p-5"},[(0,s._)("h1",null,"Some title test"),(0,s._)("p",{class:"fs-4"},"Some title test text here Some title test text here Some title test text here Some title test text hereSome title test text hereSome title test text here")],-1);function c(e,t,i,o,c,d){const S=(0,s.up)("FullPageSection"),x=(0,s.up)("MapboxMap"),p=(0,s.up)("HousingDataModal"),v=(0,s.up)("FullPageWrapper");return(0,s.wg)(),(0,s.j4)(v,null,{default:(0,s.w5)((()=>[(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[l])),_:1}),(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[(0,s._)("div",n,[(0,s._)("div",r,[a,(0,s._)("div",m,[(0,s.Wm)(x,{onOpenHousingDataModal:d.handleHousingDataModal},null,8,["onOpenHousingDataModal"])])])])])),_:1}),(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[h])),_:1}),(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[u])),_:1}),(0,s.Wm)(p,{ref:"housingDataModal"},null,512)])),_:1})}function d(e,t,i,o,l,n){return(0,s.wg)(),(0,s.iD)("div",{id:"fullpage",ref:"fullPageWrapper",onDisableScrolling:t[0]||(t[0]=(...e)=>n.disableScrolling&&n.disableScrolling(...e)),onEnableScrolling:t[1]||(t[1]=(...e)=>n.enableScrolling&&n.enableScrolling(...e))},[(0,s.WI)(e.$slots,"default",{},void 0,!0)],544)}var S=i(615),x=i.n(S),p={name:"FullPageWrapper",data(){return{fullpageInstance:null}},async mounted(){await this.$nextTick(),this.fullpageInstance=new(x())("#fullpage",{})},methods:{disableScrolling(){this.fullpageInstance&&this.fullpageInstance.setAllowScrolling(!1)},enableScrolling(){this.fullpageInstance&&this.fullpageInstance.setAllowScrolling(!0)}}},v=i(744);const f=(0,v.Z)(p,[["render",d],["__scopeId","data-v-7ba310ba"]]);var g=f;const y={class:"section"};function b(e,t,i,o,l,n){return(0,s.wg)(),(0,s.iD)("div",y,[(0,s.WI)(e.$slots,"default",{},void 0,!0)])}var _={name:"FullPageSection"};const M=(0,v.Z)(_,[["render",b],["__scopeId","data-v-363504a8"]]);var w=M;const D=(0,s._)("div",{id:"map"},null,-1);function C(e,t,i,o,l,n){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>n.showMunicipalitiesLayer&&n.showMunicipalitiesLayer(...e)),style:{position:"absolute",top:"20px",right:"20px","z-index":"9999"}}," Municipalities "),(0,s._)("button",{onClick:t[1]||(t[1]=(...e)=>n.showCountiesLayer&&n.showCountiesLayer(...e)),style:{position:"absolute",top:"50px",right:"20px","z-index":"9999"}}," Counties "),D])}var k=i(158),L=i.n(k),P=i(68),H={name:"MapboxMap",components:{},data(){return{map:null,currentPopup:null,layers:[{id:"states",name:"County Data",geoJsonUrl:"geoJSON/County_Boundaries_of_NJ2C_Hosted2C_3857.geojson",csvUrl:"/data-csvs/County_data.csv",fillColor:"rgba(200, 100, 240, 0.22)",lineColor:"rgba(200, 100, 240, 1)",lineWidth:2,visible:!0},{id:"municipalities",name:"Municipality Data",geoJsonUrl:"geoJSON/Municipal_Boundaries_of_NJ2C_Hosted2C_3857.geojson",csvUrl:"/data-csvs/Total_Units_per_Comu.csv",fillColor:"rgba(200, 100, 240, 0.22)",lineColor:"rgba(200, 100, 240, 1)",lineWidth:2,visible:!1}],csvDataLookup:{}}},mounted(){this.initMap().then((()=>{this.map.getCanvasContainer().addEventListener("mouseenter",(()=>{this.$emit("disable-scrolling")})),this.map.getCanvasContainer().addEventListener("mouseleave",(()=>{this.$emit("enable-scrolling")}))}))},methods:{async initMap(){L().accessToken="pk.eyJ1Ijoic2F2YW5hYmVuIiwiYSI6ImNsZTNobWs4YjA0eGkzcG1wZzhycjZrb3cifQ.4_Du3FBo2v9tdy2DZRhb6A";const e=new(L().Map)({container:"map",style:"mapbox://styles/mapbox/light-v11",center:[-74.7057,40.1583],zoom:7});this.map=e;const t="/affordable-housing-viz-2/";for(const i of this.layers)if(i.csvUrl){const e=await this.fetchCsvData(`${t}${i.csvUrl}`,i.id);this.csvDataLookup[i.id]=e}return new Promise((i=>{e.on("load",(async()=>{for(const i of this.layers)this.loadLayer(e,{...i,geoJsonUrl:`${t}${i.geoJsonUrl}`});i()}))}))},async loadLayer(e,t){e.addSource(t.id,{type:"geojson",data:t.geoJsonUrl}),e.addLayer({id:`${t.id}-layer`,type:"fill",source:t.id,paint:{"fill-color":t.fillColor},layout:{visibility:t.visible?"visible":"none"}}),e.addLayer({id:`${t.id}-outline`,type:"line",source:t.id,paint:{"line-color":t.lineColor,"line-width":t.lineWidth},layout:{visibility:t.visible?"visible":"none"}}),this.addMapInteractions(e,t.id)},async fetchCsvData(e,t){const i=await P.gyn(e),o={};return i.forEach((e=>{const i="municipalities"===t?e.comuMerged:e.COUNTY;o[i]={column2:e.column2,column3:e.column3,units:e.units}})),o},createDetailedHousingDataButton(e,t){const i=document.createElement("button");return i.type="button",i.classList.add("btn","btn-info","mt-2"),i.textContent="Detailed Housing Data",i.addEventListener("click",(()=>this.openHousingDataModal(e,t))),i},async openHousingDataModal(e,t){this.$emit("open-housing-data-modal",{municipalityName:e,comuMerged:t}),this.modalTitle=`${e} - Detailed Housing Data`,this.modalFields=[{key:"comuMerged",label:"Municipality Code"},{key:"development / aka",label:"Development"},{key:"units",label:"Units"},{key:"type",label:"Type"},{key:"agent",label:"Agent"},{key:"agent address",label:"Agent Address"},{key:"website",label:"Website"},{key:"source",label:"Source"},{key:"zip",label:"ZIP"},{key:"combinedPhone",label:"Phone"}];const i="/affordable-housing-viz-2/",o=await P.gyn(`${i}/data-csvs/Municipal-level-housing-data.csv`);this.modalItems=o.filter((e=>e.comuMerged===t)),this.$refs.housingDataModal.showModal()},getPopupContent(e,t){if("states"===e){const i=t.COUNTY_LABEL,o=this.csvDataLookup[e][t.COUNTY],s=document.createElement("div");if(s.innerHTML=`<strong>${i}</strong>`,o){if(o.column2){const e=document.createElement("div");e.innerHTML=`Column 2: ${o.column2}`,s.appendChild(e)}if(o.column3){const e=document.createElement("div");e.innerHTML=`Column 3: ${o.column3}`,s.appendChild(e)}}return s}if("municipalities"===e){const i=t.NAME,o=this.csvDataLookup[e][t.MUN_CODE],s=document.createElement("div");if(s.innerHTML=`<strong>${i}</strong>`,o&&o.units){const e=document.createElement("div");e.innerHTML=`Units: ${o.units}`,s.appendChild(e)}const l=this.createDetailedHousingDataButton(i,t.MUN_CODE);return s.appendChild(l),s}},addMapInteractions(e,t){const i=this.layers.find((e=>e.id===t));e.on("click",`${t}-layer`,(o=>{if(!i.visible)return;const s=o.features[0].properties,l=this.getPopupContent(t,s);this.currentPopup&&this.currentPopup.remove(),this.currentPopup=(new(L().Popup)).setLngLat(o.lngLat).setDOMContent(l).addTo(e);const n=l.querySelector("button");n&&n.addEventListener("click",(()=>{this.openHousingDataModal(s.NAME,s.MUN_CODE)}))})),e.on("mouseenter",`${t}-layer`,(()=>{e.getCanvas().style.cursor="pointer"})),e.on("mouseleave",`${t}-layer`,(()=>{e.getCanvas().style.cursor=""}))},showMunicipalitiesLayer(){const e="municipalities";this.layers.forEach((t=>{t.visible=t.id===e;const i=t.visible?"visible":"none";this.map.setLayoutProperty(`${t.id}-layer`,"visibility",i),this.map.setLayoutProperty(`${t.id}-outline`,"visibility",i)})),this.currentPopup&&this.currentPopup.remove(),this.addMapInteractions(this.map,e)},showCountiesLayer(){const e="states";this.layers.forEach((t=>{t.visible=t.id===e;const i=t.visible?"visible":"none";this.map.setLayoutProperty(`${t.id}-layer`,"visibility",i),this.map.setLayoutProperty(`${t.id}-outline`,"visibility",i)})),this.currentPopup&&this.currentPopup.remove(),this.addMapInteractions(this.map,e)}}};const O=(0,v.Z)(H,[["render",C]]);var E=O,I=i(577);const T={class:"modal fade",ref:"modal",tabindex:"-1",role:"dialog","aria-hidden":"true"},U={class:"modal-dialog",role:"document"},W={class:"modal-content"},N={class:"modal-header"},j={class:"modal-title"},z=(0,s._)("span",{"aria-hidden":"true"},"×",-1),A=[z],F={class:"modal-body"},J={class:"table table-responsive"};function Y(e,t,i,o,l,n){return(0,s.wg)(),(0,s.iD)("div",T,[(0,s._)("div",U,[(0,s._)("div",W,[(0,s._)("div",N,[(0,s._)("h5",j,(0,I.zw)(i.title),1),(0,s._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>n.hideModal&&n.hideModal(...e))},A)]),(0,s._)("div",F,[(0,s._)("table",J,[(0,s._)("thead",null,[(0,s._)("tr",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.fields,(e=>((0,s.wg)(),(0,s.iD)("th",{key:e.key},(0,I.zw)(e.label),1)))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.items,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.fields,(t=>((0,s.wg)(),(0,s.iD)("td",{key:t.key},(0,I.zw)(e[t.key]),1)))),128))])))),128))])])])])])],512)}var Z={name:"HousingDataModal",props:{title:String,fields:Array,items:Array},methods:{openHousingDataModal(e){this.housingData=e,$(this.$refs.housingDataModal).modal("show")},showModal(){this.$refs.modal.classList.add("show"),this.$refs.modal.style.display="block",document.body.classList.add("modal-open")},hideModal(){this.$refs.modal.classList.remove("show"),this.$refs.modal.style.display="none",document.body.classList.remove("modal-open")}}};const B=(0,v.Z)(Z,[["render",Y]]);var K=B,G={name:"App",components:{FullPageWrapper:g,FullPageSection:w,MapboxMap:E,HousingDataModal:K},methods:{handleHousingDataModal({municipalityName:e,comuMerged:t}){this.$refs.housingDataModal.openHousingDataModal(e,t)}}};const q=(0,v.Z)(G,[["render",c]]);var Q=q;i(702);(0,o.ri)(Q).mount("#app")}},t={};function i(o){var s=t[o];if(void 0!==s)return s.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,i),l.exports}i.m=e,function(){var e=[];i.O=function(t,o,s,l){if(!o){var n=1/0;for(h=0;h<e.length;h++){o=e[h][0],s=e[h][1],l=e[h][2];for(var r=!0,a=0;a<o.length;a++)(!1&l||n>=l)&&Object.keys(i.O).every((function(e){return i.O[e](o[a])}))?o.splice(a--,1):(r=!1,l<n&&(n=l));if(r){e.splice(h--,1);var m=s();void 0!==m&&(t=m)}}return t}l=l||0;for(var h=e.length;h>0&&e[h-1][2]>l;h--)e[h]=e[h-1];e[h]=[o,s,l]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,l,n=o[0],r=o[1],a=o[2],m=0;if(n.some((function(t){return 0!==e[t]}))){for(s in r)i.o(r,s)&&(i.m[s]=r[s]);if(a)var h=a(i)}for(t&&t(o);m<n.length;m++)l=n[m],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(h)},o=self["webpackChunkhousing_viz_prj"]=self["webpackChunkhousing_viz_prj"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=i.O(void 0,[998],(function(){return i(122)}));o=i.O(o)})();
//# sourceMappingURL=app.13b396ca.js.map