(function(){"use strict";var e={382:function(e,t,a){var o=a(9242),i=a(3396),n=a(7139);const r=e=>((0,i.dD)("data-v-21e356da"),e=e(),(0,i.Cn)(),e),s={class:"p-5 bg-image1"},l=r((()=>(0,i._)("div",{class:"container-fluid"},[(0,i._)("div",{class:"row"},[(0,i._)("div",{class:(0,n.C_)({"col-md-6":!0,"two-column-left":!0})},[(0,i._)("div",{class:"p-5"},[(0,i._)("br"),(0,i._)("h2",null,"From The landmark 1975 Mount Laurel Doctrine, which held that every town in the state must provide its “fair share” of the regional need for affordable housing…"),(0,i._)("br"),(0,i._)("p",{class:"fs-4"},[(0,i._)("i",null,"“As a developing municipality, Mount Laurel must, by its land use regulations, make realistically possible the opportunity for an appropriate variety and choice of housing for all categories of people who may desire to live there, of course including those of low and moderate income.”")]),(0,i._)("p",{class:"fs-6 text-end",style:{color:"rgb(94, 94, 94)"}},[(0,i.Uk)("— Excerpt from The Mount Laurel Doctrine."),(0,i._)("br"),(0,i.Uk)("Southern Burlington County NAACP v.Township"),(0,i._)("br"),(0,i.Uk)(" of Mount Laurel (67 N.J. 151, 1975)")]),(0,i._)("br")])]),(0,i._)("div",{class:"col-md-6"},[(0,i._)("div",{class:"bg-image2 two-column-right"})])])],-1))),d=r((()=>(0,i._)("div",{class:"container-fluid"},[(0,i._)("div",{class:"row"},[(0,i._)("div",{class:(0,n.C_)({"col-md-6":!0,"two-column-left":!0})},[(0,i._)("div",{class:"p-5"},[(0,i._)("br"),(0,i._)("h2",null,"…To the Fair Share Housing Center, a present-day organization fighting to ensure towns across NJ meet their Mount Laurel obligations."),(0,i._)("br"),(0,i._)("p",{class:"fs-4"},[(0,i._)("i",null,"“Since 2015, Fair Share Housing Center has settled cases with more than 340 towns throughout New Jersey, which will lead to approximately 50,000 more affordable homes in the next decade.”")]),(0,i._)("p",{class:"fs-4 text-end",style:{color:"rgb(94, 94, 94)"}},"— Fair Share Housing Center"),(0,i._)("br")])]),(0,i._)("div",{class:"col-md-6 nopadding"},[(0,i._)("div",{class:"bg-image3 two-column-right"})])])],-1))),c={class:"container-fluid"},u={class:"row"},p=r((()=>(0,i._)("div",{class:"col-md-2"},null,-1))),h={class:"col-md-8"},f={class:"p-5"},g=r((()=>(0,i._)("h3",{class:"pt-3",style:{"font-weight":"400"}},"The gap is large. But devoted organizations and advocates across the state are fighting for change by leveraging Mount Laurel, Section 8, Federal HUD money, and more. ",-1))),m=r((()=>(0,i._)("h3",null,[(0,i._)("b",null,"Everyone can play a part...")],-1))),v=r((()=>(0,i._)("div",{class:"col-md-2"},null,-1))),y={class:"p-5 bg-image4"};function b(e,t,a,o,r,b){const w=(0,i.up)("MapboxMap"),x=(0,i.up)("mapOverlayWchart"),_=(0,i.up)("MapOverlay"),M=(0,i.up)("MapOverlayTight"),C=(0,i.up)("FullPageSection"),D=(0,i.up)("ForceDirectedGraph"),L=(0,i.up)("HorizontalBarGraph"),k=(0,i.up)("FullPageWrapper"),H=(0,i.up)("HousingDataModal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[r.showMap?((0,i.wg)(),(0,i.j4)(w,{key:0,ref:"mapboxMap",onOpenHousingDataModal:b.handleHousingDataModal,class:(0,n.C_)({"map-container":!0,visible:r.isMapVisible}),currentIndex:r.destination.index},null,8,["onOpenHousingDataModal","class","currentIndex"])):(0,i.kq)("",!0),r.showMapOverlay?((0,i.wg)(),(0,i.j4)(x,{key:1,class:"map-overlay-half",currentIndex:r.destination.index},null,8,["currentIndex"])):(0,i.kq)("",!0),(0,i.Wm)(k,{options:r.fullPageOptions,onOnLeave:b.onSectionLeave},{default:(0,i.w5)((()=>[(0,i.Wm)(C,null,{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i.Wm)(_,{class:"map-overlay-full-top",title:"The Story of Affordable Housing in NJ",content:'\n        \n        <p class= "fs-4 text-center mb-0">An extremely abridged history and today\'s current need.</p>\n        \n        <br> <p class= "fs-5 text-center"><i>Scroll throughout the story to continue.</i></p>'}),(0,i.Wm)(M,{class:"map-overlay-bottom-right",title:"",content:'<p class="fs-5 mb-0 mt-0 pt-0 pb-0"> <a href="https://www.princeton.edu/news/2012/01/19/plans-merwick-stanworth-housing-unveiled" target="_blank">Merwick and Stanworth Development</a> - Torti Gallas and Partners</p>'})])])),_:1}),(0,i.Wm)(C,{class:"graph-container"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{class:"map-overlay-full-top mb-0",title:"<h3>Affordable housing is a rich and complex network of driving forces.</h3>",content:""}),(0,i.Wm)(D,{data:r.graphData},null,8,["data"])])),_:1}),(0,i.Wm)(C,null,{default:(0,i.w5)((()=>[l])),_:1}),(0,i.Wm)(C,null,{default:(0,i.w5)((()=>[d])),_:1}),(0,i.Wm)(C,{class:"pointer-events-off"}),(0,i.Wm)(C,{class:"pointer-events-off"}),(0,i.Wm)(C,{class:"pointer-events-off"}),(0,i.Wm)(C,null,{default:(0,i.w5)((()=>[(0,i._)("div",c,[(0,i._)("div",u,[p,(0,i._)("div",h,[(0,i._)("div",f,[(0,i.Wm)(L,{data:r.barData,visibleBars:[!0,!0,!0]},null,8,["data"]),g,m])]),v])])])),_:1}),(0,i.Wm)(C,null,{default:(0,i.w5)((()=>[(0,i._)("div",y,[(0,i.Wm)(_,{class:"map-overlay-full-bottom",title:"… even if all you do is keep an open heart to denser smart housing built around you.",content:"Shown is the Merwick Stanworth community in Princeton. This community adds 56 affordable homes.</i>"})])])),_:1})])),_:1},8,["options","onOnLeave"]),(0,i.Wm)(H,{ref:"housingDataModal",fields:r.modalFields},null,8,["fields"])],64)}function w(e,t,a,o,n,r){return(0,i.wg)(),(0,i.iD)("div",{id:"fullpage",ref:"fullPageWrapper",onDisableScrolling:t[0]||(t[0]=(...t)=>e.disableScrolling&&e.disableScrolling(...t)),onEnableScrolling:t[1]||(t[1]=(...t)=>e.enableScrolling&&e.enableScrolling(...t))},[(0,i.WI)(e.$slots,"default",{},void 0,!0)],544)}var x=a(2120),_=a.n(x),M={name:"FullPageWrapper",props:{options:{type:Object,default:()=>({})}},data(){return{fullpageInstance:null}},mounted(){this.$nextTick((()=>{this.fullpageInstance=new(_())(this.$refs.fullPageWrapper,{...this.options,onLeave:(e,t,a)=>{this.$emit("onLeave",e,t,a)},afterLoad:(e,t,a)=>{this.$emit("afterLoad",e,t,a)}})}))},beforeUnmount(){this.fullpageInstance&&this.fullpageInstance.destroy("all")}},C=a(89);const D=(0,C.Z)(M,[["render",w],["__scopeId","data-v-730cac30"]]);var L=D;const k={class:"section"};function H(e,t,a,o,n,r){return(0,i.wg)(),(0,i.iD)("div",k,[(0,i.WI)(e.$slots,"default",{},void 0,!0)])}var N={name:"FullPageSection"};const P=(0,C.Z)(N,[["render",H],["__scopeId","data-v-363504a8"]]);var T=P;const S=(0,i._)("div",null,[(0,i._)("p",{style:{position:"absolute",top:"15px",right:"19px","z-index":"9999","font-size":"18px","background-color":"white"}}," Housing Data ")],-1),I=(0,i._)("div",{id:"map",style:{}},null,-1);function $(e,t,a,n,r,s){return(0,i.wg)(),(0,i.iD)("div",null,[S,(0,i.wy)((0,i._)("button",{class:"btn btn-primary mt-2",onClick:t[0]||(t[0]=(...e)=>s.showJacobsonLayer&&s.showJacobsonLayer(...e)),style:{position:"absolute",top:"40px",right:"15px","z-index":"9999",width:"125px","background-color":"#ae017e","border-color":"#ffffff","border-width":"2px"}}," Mt. Laurel ",512),[[o.F8,s.shouldShowMtLaurelButton]]),(0,i.wy)((0,i._)("button",{class:"btn btn-primary mt-2",onClick:t[1]||(t[1]=(...e)=>s.showMunicipalitiesLayer&&s.showMunicipalitiesLayer(...e)),style:{position:"absolute",top:"83px",right:"15px","z-index":"9999",width:"125px","background-color":"#238443","border-color":"#ffffff","border-width":"2px"}}," Current ",512),[[o.F8,s.shouldShowMunicipalitiesButton]]),(0,i.wy)((0,i._)("button",{class:"btn btn-primary mt-2",onClick:t[2]||(t[2]=(...e)=>s.showCountiesLayer&&s.showCountiesLayer(...e)),style:{position:"absolute",top:"126px",right:"15px","z-index":"9999",width:"125px","background-color":"#cc4c02","border-color":"#ffffff","border-width":"2px"}}," Need ",512),[[o.F8,s.shouldShowCountiesButton]]),I])}var J=a(7709),O=a.n(J),j=a(6902),W={props:{currentIndex:{type:Number,required:!0}},computed:{shouldShowMtLaurelButton(){return 4===this.currentIndex||5===this.currentIndex||6===this.currentIndex},shouldShowMunicipalitiesButton(){return 5===this.currentIndex||6===this.currentIndex},shouldShowCountiesButton(){return 6===this.currentIndex}},name:"MapboxMap",components:{},data(){return{map:null,currentPopup:null,layers:[{id:"states",name:"County Data",geoJsonUrl:"geoJSON/County_Boundaries_of_NJ2C_Hosted2C_3857.geojson",csvUrl:"/data-csvs/MODIFIED_renter_household_income_filtered copy.csv",fillColor:"rgba(200, 100, 240, 0.22)",lineColor:"#3a3a3a",colorSetName:"states",lineWidth:1,visible:!0},{id:"municipalities",name:"Municipality Data",geoJsonUrl:"geoJSON/Municipal_Boundaries_of_NJ2C_Hosted2C_3857.geojson",csvUrl:"/data-csvs/Total_Units_per_Comu.csv",fillColor:"rgba(200, 100, 240, 0.22)",lineColor:"#3a3a3a",colorSetName:"municipalities",lineWidth:1,visible:!1},{id:"jacobson",name:"Jacobson Data",geoJsonUrl:"geoJSON/Municipal_Boundaries_of_NJ2C_Hosted2C_3857.geojson",csvUrl:"/data-csvs/Total_Units_per_Comu.csv",colorSetName:"jacobson",fillColor:"rgba(200, 100, 240, 0.22)",lineColor:"#3a3a3a",lineWidth:1,visible:!1}],csvDataLookup:{}}},watch:{currentIndex(){this.shouldShowJacobsonLayer()?this.showJacobsonLayer():this.shouldShowMunicipalitiesLayer()?this.showMunicipalitiesLayer():this.shouldShowStatesLayer()?this.showCountiesLayer():(this.layers.forEach((e=>{e.visible=!1,this.map.setLayoutProperty(`${e.id}-layer`,"visibility","none"),this.map.setLayoutProperty(`${e.id}-outline`,"visibility","none")})),this.currentPopup&&this.currentPopup.remove())}},mounted(){this.initMap().then((()=>{this.map.getCanvasContainer().addEventListener("mouseenter",(()=>{this.$emit("disable-scrolling")})),this.map.getCanvasContainer().addEventListener("mouseleave",(()=>{this.$emit("enable-scrolling")}))})),this.map.on("style.load",(()=>{this.showJacobsonLayer()}))},methods:{async initMap(){O().accessToken="pk.eyJ1Ijoic2F2YW5hYmVuIiwiYSI6ImNsZTNobWs4YjA0eGkzcG1wZzhycjZrb3cifQ.4_Du3FBo2v9tdy2DZRhb6A";const e=new(O().Map)({container:"map",style:"mapbox://styles/mapbox/light-v11",center:[-76.2057,40.1583],zoom:7.3});this.map=e;const t="/affordable-housing-viz-2/";for(const a of this.layers)if(a.csvUrl){const e=await this.fetchCsvData(`${t}${a.csvUrl}`,a.id);this.csvDataLookup[a.id]=e}return new Promise((a=>{e.on("load",(async()=>{for(const a of this.layers)this.loadLayer(e,{...a,geoJsonUrl:`${t}${a.geoJsonUrl}`});a()}))}))},async loadLayer(e,t){e.addSource(t.id,{type:"geojson",data:t.geoJsonUrl}),e.addLayer({id:`${t.id}-layer`,type:"fill",source:t.id,paint:{"fill-color":t.fillColor},layout:{visibility:t.visible?"visible":"none"}}),e.addLayer({id:`${t.id}-outline`,type:"line",source:t.id,paint:{"line-color":t.lineColor,"line-width":t.lineWidth},layout:{visibility:t.visible?"visible":"none"}}),this.addMapInteractions(e,t)},async fetchCsvData(e,t){const a=await j.gyn(e),o={};return a.forEach((e=>{if("municipalities"===t){const t=e.comuMerged;o[t]={units:e.units}}else if("jacobson"===t){const t=e.comuMerged;o[t]={total:e["Total"],priorRound:e["Prior Round Obligations (1987-1999)"],presentNeed:e["Present Need (2015)"],gapPresentNeed:e["Gap Present Need (2015)"],prospectiveNeed:e["Prospective Need (2015-2025)"],prospectiveGapPresent:e["Prospective + Gap Present"]}}else if("states"===t){const t=e.COUNTY;o[t]={OccupiedRentalHousingUnits:e["Occupied rental housing units"],Moderate_LMI_estimate:e.Moderate_LMI_estimate}}})),o},createDetailedHousingDataButton(e,t){const a=document.createElement("button");return a.type="button",a.classList.add("btn","mt-2","btn-outline-primary","btn-sm"),a.textContent="Detailed Housing Data",a.addEventListener("click",(()=>this.openHousingDataModal(e,t))),a},async openHousingDataModal(e,t){this.$emit("open-housing-data-modal",{municipalityName:e,comuMerged:t,items:[]})},formatFieldValue(e){const t=parseFloat(e);if(!isNaN(t)){const e=t.toLocaleString();return e}return e},getPopupContent(e,t){if("states"===e){const a=t.COUNTY_LABEL,o=this.csvDataLookup[e][t.COUNTY],i=document.createElement("div");if(i.innerHTML=`<h5><strong>${a}</strong></h5>`,o&&o.Moderate_LMI_estimate){const e=document.createElement("div"),t=this.formatFieldValue(o.Moderate_LMI_estimate);e.innerHTML=`Moderate, low, and very low <br>income households: <br><h5><strong>${t}</strong></h5>`,i.appendChild(e)}if(o.OccupiedRentalHousingUnits){const e=document.createElement("div");e.innerHTML=`Total rental households:<br> ${o.OccupiedRentalHousingUnits}`,i.appendChild(e)}return i}if("municipalities"===e){const a=t.NAME,o=this.csvDataLookup[e][t.MUN_CODE],i=document.createElement("div");if(i.innerHTML=`<h5><strong>${a}</strong></h5><h6>Existing Affordable <br> Households (2022)</h6>`,o&&o.units){const e=document.createElement("div"),t=this.formatFieldValue(o.units);e.innerHTML=`<h5><strong>Total: ${t}</strong></h5>`,i.appendChild(e)}const n=this.createDetailedHousingDataButton(a,t.MUN_CODE);return i.appendChild(n),i}if("jacobson"===e){const a=t.NAME,o=this.csvDataLookup[e][t.MUN_CODE];console.log("rowData",o);const i=document.createElement("div");if(i.innerHTML=`<h5><strong>${a} </strong></h5>`,o){if(o.total){const e=document.createElement("div"),t=this.formatFieldValue(o.total);e.innerHTML=`Total Obligation:<br><h5><strong> ${t} homes</strong></h5>`,i.appendChild(e)}if(o.priorRound){const e=document.createElement("div");e.innerHTML=`Round 1 (1987-1999): ${o.priorRound}`,i.appendChild(e)}if(o.presentNeed){const e=document.createElement("div");e.innerHTML=`Fix Existing housing (as of 2015): ${o.presentNeed}`,i.appendChild(e)}if(o.gapPresentNeed){const e=document.createElement("div");e.innerHTML=`Round 2 (2000-2015): ${o.gapPresentNeed}`,i.appendChild(e)}if(o.prospectiveNeed){const e=document.createElement("div");e.innerHTML=`Round 3 (2015-2025): ${o.prospectiveNeed}`,i.appendChild(e)}}else console.log("No rowData found for",t.MUN_CODE);return i}},getColorSet(e){const t={default:[{value:1,color:"#ffffcc"},{value:5,color:"#d9f0a3"},{value:28,color:"#addd8e"},{value:149,color:"#78c679"},{value:791,color:"#41ab5d"},{value:4196,color:"#238443"},{value:1/0,color:"#005a32"}],jacobson:[{value:1,color:"#feebe2"},{value:40,color:"#fcc5c0"},{value:100,color:"#fa9fb5"},{value:350,color:"#f768a1"},{value:703,color:"#dd3497"},{value:1466,color:"#ae017e"},{value:1/0,color:"#7a0177"}],states:[{value:4366,color:"#ffffd4"},{value:7714,color:"#fee391"},{value:13629,color:"#fec44f"},{value:24080,color:"#fe9929"},{value:42545,color:"#ec7014"},{value:75170,color:"#cc4c02"},{value:1/0,color:"#8c2d04"}]};return t[e]||t.default},getFillColor(e,t){const a=this.getColorSet(t),o=parseInt(e,10);for(const i of a)if(o<=i.value)return i.color},addMapInteractions(e,t){const a=t.id,o=this.layers.find((e=>e.id===a));if("municipalities"===a){const t=["match",["get","MUN_CODE"],...Object.entries(this.csvDataLookup[a]).flatMap((([e,t])=>{const a=this.getFillColor(t.units,"default");return a?[e,a]:[]})),"rgba(0, 0, 0, 0)"];e.setPaintProperty(`${a}-layer`,"fill-color",t)}if("states"===a){const t=["match",["get","COUNTY"],...Object.entries(this.csvDataLookup[a]).flatMap((([e,t])=>{const a=this.getFillColor(parseInt(t.Moderate_LMI_estimate),"states");return a?[e,a]:[]})),"rgba(0, 0, 0, 0)"];e.setPaintProperty(`${a}-layer`,"fill-color",t)}if("jacobson"===a){const t=["match",["get","MUN_CODE"],...Object.entries(this.csvDataLookup[a]).flatMap((([e,t])=>{const a=this.getFillColor(t.total,"jacobson");return a?[e,a]:[]})),"rgba(0, 0, 0, 0)"];e.setPaintProperty(`${a}-layer`,"fill-color",t)}e.on("click",`${a}-layer`,(t=>{if(!o.visible)return;const i=t.features[0].properties,n=this.getPopupContent(a,i);this.currentPopup&&this.currentPopup.remove(),this.currentPopup=(new(O().Popup)).setLngLat(t.lngLat).setDOMContent(n).addTo(e);const r=n.querySelector("button");r&&r.addEventListener("click",(()=>{this.$emit("open-housing-data-modal",{municipalityName:i.NAME,munCode:i.MUN_CODE})}))})),e.on("mouseenter",`${a}-layer`,(()=>{e.getCanvas().style.cursor="pointer"})),e.on("mouseleave",`${a}-layer`,(()=>{e.getCanvas().style.cursor=""}))},shouldShowJacobsonLayer(){return 4===this.currentIndex},shouldShowMunicipalitiesLayer(){return 5===this.currentIndex},shouldShowStatesLayer(){return 6===this.currentIndex},updateLayerVisibility(e){this.layers.forEach((t=>{let a="none";t.id===e&&(a="visible"),("jacobson"===t.id&&this.shouldShowJacobsonLayer()||"municipalities"===t.id&&this.shouldShowMunicipalitiesLayer()||"states"===t.id&&this.shouldShowStatesLayer())&&(a="visible"),this.map.setLayoutProperty(`${t.id}-layer`,"visibility",a),this.map.setLayoutProperty(`${t.id}-outline`,"visibility",a)}))},showMunicipalitiesLayer(){const e="municipalities";this.layers.forEach((e=>{e.visible="municipalities"===e.id})),this.currentPopup&&this.currentPopup.remove(),this.addMapInteractions(this.map,e),this.updateLayerVisibility("municipalities")},showCountiesLayer(){const e="states";this.layers.forEach((e=>{e.visible="states"===e.id})),this.currentPopup&&this.currentPopup.remove(),this.addMapInteractions(this.map,e),this.updateLayerVisibility("states")},showJacobsonLayer(){const e="jacobson";this.layers.forEach((e=>{e.visible="jacobson"===e.id})),this.currentPopup&&this.currentPopup.remove(),this.addMapInteractions(this.map,e),this.updateLayerVisibility("jacobson")}}};const A=(0,C.Z)(W,[["render",$]]);var E=A;const F={class:"d-flex justify-content-center align-items-center"},U={class:"container-fluid px-0"},B={class:"row h-100"},z={class:""},G={class:"p-4 bg-white rounded w-100"},R=["innerHTML"],Y=["innerHTML"];function q(e,t,a,o,n,r){return(0,i.wg)(),(0,i.iD)("div",F,[(0,i._)("div",U,[(0,i._)("div",B,[(0,i._)("div",z,[(0,i._)("div",G,[a.title?((0,i.wg)(),(0,i.iD)("h1",{key:0,class:"mb-3",innerHTML:a.title},null,8,R)):(0,i.kq)("",!0),a.content?((0,i.wg)(),(0,i.iD)("p",{key:1,class:"fs-4 mb-0",innerHTML:a.content},null,8,Y)):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"default")])])])])])}var V={name:"MapOverlay",props:{title:{type:String,default:""},content:{type:String,default:""}}};const Z=(0,C.Z)(V,[["render",q]]);var K=Z;const Q={class:"d-flex justify-content-center align-items-center"},X={class:"container-fluid px-0"},ee={class:"row h-100"},te={class:""},ae={class:"p-1 rounded w-100"},oe=["innerHTML"],ie=["innerHTML"];function ne(e,t,a,o,n,r){return(0,i.wg)(),(0,i.iD)("div",Q,[(0,i._)("div",X,[(0,i._)("div",ee,[(0,i._)("div",te,[(0,i._)("div",ae,[a.title?((0,i.wg)(),(0,i.iD)("h1",{key:0,class:"mb-4",innerHTML:a.title},null,8,oe)):(0,i.kq)("",!0),a.content?((0,i.wg)(),(0,i.iD)("p",{key:1,class:"fs-4 mb-0",innerHTML:a.content},null,8,ie)):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"default")])])])])])}var re={name:"MapOverlay",props:{title:{type:String,default:""},content:{type:String,default:""}}};const se=(0,C.Z)(re,[["render",ne]]);var le=se;const de={class:"d-flex justify-content-center align-items-center"},ce={class:"container-fluid px-0"},ue={class:"row h-100"},pe={class:""},he={class:"p-4 bg-white rounded w-100"},fe={style:{"min-height":"160px"}},ge=["innerHTML"],me=["innerHTML"],ve={ref:"barGraphContainer",class:"bar-graph-container"},ye=(0,i._)("p",{class:"pt-1 mb-0 fs-5 text-center"},[(0,i._)("i",null,"Scroll here to continue. Scroll or click the map to see the data.")],-1);function be(e,t,a,o,n,r){return(0,i.wg)(),(0,i.iD)("div",de,[(0,i._)("div",ce,[(0,i._)("div",ue,[(0,i._)("div",pe,[(0,i._)("div",he,[(0,i._)("div",fe,[(0,i._)("h1",{class:"mb-1",innerHTML:r.currentText.title},null,8,ge),(0,i._)("p",{class:"fs-4 mb-0",innerHTML:r.currentText.content},null,8,me)]),(0,i._)("div",ve,null,512),ye,(0,i.WI)(e.$slots,"default")])])])])])}var we={name:"mapOverlayWchart",props:{currentIndex:{type:Number,required:!0}},data(){return{barData:[{label:"Mt. Laurel Projections",value:305504,color:"#ae017e",index:4},{label:"What we have",value:206083,color:"#238443",index:5},{label:"What we need",value:797109,color:"#cc4c02",index:6}],visibleBars:[!0,!0,!0],graph:null,xScale:null,textMinHeight:0,textData:[{title:"Where do we stand now?",content:"Based on 2017 court projections, Mount Laurel calls for <b>305,504</b> affordable homes across the state by 2025.",index:4},{title:"Current Estimates",content:"2022 data shows we have <b>206,083</b> affordable homes…",index:5},{title:"The Housing Need",content:"<p>Roughly <b>797,109</b> renter households across the state are moderate to low income.",index:6}]}},mounted(){this.createGraph()},watch:{currentIndex(e){this.visibleBars=this.barData.map((t=>t.index===e))},visibleBars:{handler(){this.updateGraph()},deep:!0}},computed:{currentText(){return this.textData.find((e=>e.index===this.currentIndex))||{title:"",content:""}}},methods:{createGraph(){const e=this.$refs.barGraphContainer,t=e.offsetWidth,a=40,o=50,i=o,n=this.barData.length*(a+o)-o+i;e.style.height=`${n}px`;const r=j.Ys(e).append("svg").attr("width",t).attr("height",n).attr("viewBox",`0 -${i} ${t} ${n}`),s=j.Fp7(this.barData,(e=>e.value)),l=j.BYU().domain([0,s]).range([0,t]);this.graph=r.selectAll(".bar-group").data(this.barData).join("g").attr("class","bar-group").attr("transform",((e,t)=>`translate(0, ${t*(a+o)})`)),this.graph.append("rect").attr("class","bar").attr("width",0).attr("height",a).attr("rx","3").attr("fill",(e=>e.color)).transition().duration(1e3).attr("width",(e=>l(e.value))),this.graph.append("text").attr("class","label").attr("x",5).attr("y",-o/5.7).attr("font-size","18px").attr("font-family","sans-serif").attr("font-weight","bold").attr("fill","#000").text((e=>e.label)),this.graph.append("text").attr("class","value").attr("x",(e=>l(e.value)-5)).attr("y",a/2).attr("dy",".35em").attr("text-anchor","end").attr("font-size","16px").attr("font-weight","400").attr("font-family","sans-serif").attr("fill","#fff").text((e=>j.WUZ(",")(e.value))),this.updateGraph()},updateGraph(){this.graph.style("display",((e,t)=>t<=this.currentIndex-4?"block":"none"))}}};const xe=(0,C.Z)(we,[["render",be]]);var _e=xe;const Me={ref:"popupContainer",class:"d-none popup-container"},Ce={ref:"graphContainer",class:"graph-container"};function De(e,t,a,o,n,r){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Me,null,512),(0,i._)("div",Ce,null,512),(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>r.resetSimulation&&r.resetSimulation(...e)),class:"reset-button btn btn-outline-secondary"},"Reset Simulation")],64)}var Le=a(3910),ke={name:"ForceDirectedGraph",props:{data:{type:Object,required:!0}},mounted(){this.createGraph(),document.addEventListener("click",(e=>{e.target&&"function"===typeof e.target.closest&&!e.target.closest(".node")&&(this.$refs.popupContainer.classList.add("d-none"),this.popperInstance&&this.popperInstance.destroy())}))},methods:{resetSimulation(){this.simulation.stop(),j.Ys(this.$refs.graphContainer).select("svg").remove(),this.createGraph()},createGraph(){const e=this.$refs.graphContainer,t=e.offsetWidth,a=e.offsetHeight,o=j.Ys(e).append("svg").attr("width",t).attr("height",a);this.simulation=j.A4v(this.data.nodes).force("link",j.Fsl(this.data.links).id((e=>e.id)).distance(70)).force("charge",j.q5i().strength(-10)).force("collide",j.Hh(60)).force("center",j.wqt(t/2,a/2).strength(1)).on("tick",this.updateGraph.bind(this));const i=this.data.nodes.map((e=>({...e,isLabelNode:!0,radius:40}))),n=this.data.nodes.concat(i);this.simulation.nodes(n);o.selectAll(".link").data(this.data.links).join("line").attr("class","link").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",(e=>Math.sqrt(e.value)));const r=o.selectAll(".node").data(this.data.nodes).join("g").attr("class","node").attr("id",(e=>`node-${e.id}`)).call(this.drag(this.simulation));r.append("circle").attr("r",(e=>e.radius)).attr("fill",(e=>e.color)).on("click",((e,t)=>this.createPopup(e,t))),r.append("circle").attr("r","28").style("cursor","pointer").attr("fill","rgba(0, 0, 0, 0.000001)").on("click",((e,t)=>this.createPopup(e,t)));o.selectAll(".label-node").data(i).join("circle").attr("class","label-node").attr("r",(e=>e.radius)).attr("fill","none");r.append("foreignObject").attr("x",(e=>e.radius+5)).attr("y","-0.5em").attr("width",130).attr("height",90).attr("pointer-events","none").append("xhtml:div").style("font",(e=>`${e.style?.fontSize||"15px"} sans-serif`)).style("font-weight",(e=>e.style?.fontWeight)).style("word-wrap","break-word").style("pointer-events","none").html((e=>e.name))},updateGraph(){const e=j.td_(".link"),t=j.td_(".node");e.attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y)),t.attr("transform",(e=>`translate(${e.x}, ${e.y})`));const a=j.td_(".label-node");j.td_(".node circle");a.attr("cx",(e=>{const t=this.data.nodes.find((t=>t.id===e.id));return t.x+60})).attr("cy",(e=>{const t=this.data.nodes.find((t=>t.id===e.id));return t.y-0}))},createPopup(e,t){const a=this.$refs.popupContainer,o=t.title||"",i=t.body||"",n=t.icon||"";let r="";o&&(r+=`<h5>${o}</h5>`),n&&(r+=`<img src="${n}" alt="${o}" />`),i&&(r+=`<p class="mb-0">${i}</p>`),a.innerHTML=r,a.classList.remove("d-none"),this.popperInstance&&this.popperInstance.destroy(),this.popperInstance=(0,Le.fi)(e.target,a,{modifiers:[{name:"offset",options:{offset:[0,10]}}]});const s=j.Ys(`#node-${t.id}`);this.popperInstance.update(),j.HTH((()=>{const e=s.node().getBoundingClientRect();this.$refs.popupContainer.style.left=e.x+window.scrollX+"px",this.$refs.popupContainer.style.top=e.y+window.scrollY+"px",this.popperInstance.update()}))},drag(e){function t(t,a){t.active||e.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y}function a(e,t){t.fx=e.subject.x=e.x,t.fy=e.subject.y=e.y}function o(t,a){t.active||e.alphaTarget(0),a.fx=null,a.fy=null}return j.ohM().on("start",t).on("drag",a).on("end",o)}}};const He=(0,C.Z)(ke,[["render",De],["__scopeId","data-v-3f245331"]]);var Ne=He;const Pe={ref:"barGraphContainer",class:"bar-graph-container"};function Te(e,t,a,o,n,r){return(0,i.wg)(),(0,i.iD)("div",Pe,null,512)}var Se={name:"HorizontalBarGraph",props:{data:{type:Array,required:!0},visibleBars:{type:Array,required:!0}},data(){return{graph:null}},mounted(){this.createGraph()},watch:{visibleBars:{handler(){this.updateGraph()},deep:!0}},methods:{createGraph(){const e=this.$refs.barGraphContainer,t=e.offsetWidth,a=40,o=50,i=o,n=this.data.length*(a+o)-o+i;e.style.height=`${n}px`;const r=j.Ys(e).append("svg").attr("width",t).attr("height",n).attr("viewBox",`0 -${i} ${t} ${n}`),s=j.Fp7(this.data,(e=>e.value)),l=j.BYU().domain([0,s]).range([0,t]);this.graph=r.selectAll(".bar-group").data(this.data).join("g").attr("class","bar-group").attr("transform",((e,t)=>`translate(0, ${t*(a+o)})`)),this.graph.append("rect").attr("class","bar").attr("width",(e=>l(e.value))).attr("height",a).attr("rx","3").attr("fill",(e=>e.color)),this.graph.append("text").attr("class","label").attr("x",5).attr("y",-o/5.7).attr("font-size","18px").attr("font-family","sans-serif").attr("font-weight","bold").attr("fill","#000").text((e=>e.label)),this.graph.append("text").attr("class","value").attr("x",(e=>l(e.value)-5)).attr("y",a/2).attr("dy",".35em").attr("text-anchor","end").attr("font-size","16px").attr("font-family","sans-serif").attr("fill","#fff").text((e=>j.WUZ(",")(e.value))),this.updateGraph()},updateGraph(){this.graph.style("display",((e,t)=>this.visibleBars[t]?"block":"none"))}}};const Ie=(0,C.Z)(Se,[["render",Te],["__scopeId","data-v-7aa8c353"]]);var $e=Ie;const Je=e=>((0,i.dD)("data-v-e89e18ce"),e=e(),(0,i.Cn)(),e),Oe={id:"housingDataModal",class:"modal fade",ref:"modal",tabindex:"-1",role:"dialog","aria-hidden":"true"},je={class:"modal-dialog modal-wide",role:"document"},We={class:"modal-content"},Ae={class:"modal-header"},Ee={class:"modal-title"},Fe=Je((()=>(0,i._)("span",{"aria-hidden":"true"},"×",-1))),Ue=[Fe],Be={class:"modal-body sticky-padding-fix"},ze=Je((()=>(0,i._)("h4",{class:"pt-4 pb-2"},[(0,i.Uk)("The following housing data is from the NJ Division of Codes and Standards 2022 List of "),(0,i._)("a",{href:"https://www.nj.gov/dca/divisions/codes/publications/developments.html"},"Affordable Developments by County"),(0,i.Uk)(". ")],-1))),Ge={class:"table table-responsive table-sticky-header"};function Re(e,t,a,o,r,s){return(0,i.wg)(),(0,i.iD)("div",Oe,[(0,i._)("div",je,[(0,i._)("div",We,[(0,i._)("div",Ae,[(0,i._)("h1",Ee,(0,n.zw)(r.modalTitle),1),(0,i._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>s.hideModal&&s.hideModal(...e))},Ue)]),(0,i._)("div",Be,[ze,(0,i._)("table",Ge,[(0,i._)("thead",null,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.fields,(e=>((0,i.wg)(),(0,i.iD)("th",{key:e.key},(0,n.zw)(e.label),1)))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.localItems,((e,t)=>((0,i.wg)(),(0,i.iD)("tr",{key:t},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.fields,(t=>((0,i.wg)(),(0,i.iD)("td",{key:t.key},(0,n.zw)(e[t.key]),1)))),128))])))),128))])])])])])],512)}var Ye={name:"HousingDataModal",props:{fields:Array},data(){return{modalTitle:"",localItems:[]}},methods:{showModal(){this.$emit("disable-scrolling"),this.$nextTick((()=>{const e=window.jQuery("#housingDataModal");e.modal("show"),document.body.style.overflow="hidden",document.body.classList.add("modal-open")}))},hideModal(){const e=window.jQuery(this.$refs.modal);document.body.style.overflow="",document.body.classList.remove("modal-open"),this.$emit("enable-scrolling"),e.modal("hide")},updateItems(e){console.log("updating modal items:",e),this.localItems=e}}};const qe=(0,C.Z)(Ye,[["render",Re],["__scopeId","data-v-e89e18ce"]]);var Ve=qe,Ze={name:"App",components:{FullPageWrapper:L,FullPageSection:T,MapboxMap:E,HousingDataModal:Ve,HorizontalBarGraph:$e,ForceDirectedGraph:Ne,MapOverlay:K,MapOverlayTight:le,mapOverlayWchart:_e},data(){return{modalTitle:"",modalFields:[],modalItems:[],isMapClickable:!1,showMap:!1,showMapOverlay:!1,showModal:!1,destination:{index:0,fullpageInstance:null},isMapVisible:!1,graphData:{nodes:[{id:"1",name:"Public Entities",radius:20,color:"#ae017e",title:"Public Entities",body:"Public Entities play a crucial role in affordable housing by providing funding, resources, and oversight to support housing initiatives and programs.",icon:"",style:{fontWeight:"bold",fontSize:"18px"}},{id:"2",name:"New Jersey Department of Community Affairs",radius:10,color:"#dd3497",title:"New Jersey Department of Community Affairs",body:"The New Jersey Department of Community Affairs (DCA) is responsible for administering affordable housing programs, providing grants, and overseeing housing-related policies in the state.",style:{fontWeight:"bold",fontSize:"16px"}},{id:"3",name:"New Jersey Housing and Mortgage Finance Agency",radius:10,color:"#dd3497",title:"New Jersey Housing and Mortgage Finance Agency",body:"The New Jersey Housing and Mortgage Finance Agency (NJHMFA) offers various financing options, mortgage assistance programs, and initiatives to promote affordable housing development in New Jersey."},{id:"4",name:"New Jersey Redevelopment Authority",radius:10,color:"#dd3497",title:"New Jersey Redevelopment Authority",body:"The New Jersey Redevelopment Authority (NJRA) supports affordable housing and community development projects, revitalizes neighborhoods, and fosters economic growth in the state."},{id:"13",name:"NJ Housing Resource Center",radius:10,color:"#dd3497",title:"NJ Housing Resource Center",body:"The NJ Housing Resource Center provides valuable information and resources to help individuals and families find affordable housing options, understand their rights, and access housing-related assistance programs."},{id:"15",name:"Department of Housing and Urban Development",radius:10,color:"#dd3497",title:"Department of Housing and Urban Development (HUD)",body:"The Department of Housing and Urban Development (HUD) is a federal agency that works closely with New Jersey to provide funding, programs, and support for affordable housing, community development, and fair housing initiatives.",style:{fontWeight:"bold",fontSize:"16px"}},{id:"16",name:"Community Development Block Grant",radius:10,color:"#dd3497",title:"Community Development Block Grant",body:"The Community Development Block Grant (CDBG) program, administered by HUD, provides funding to local communities in New Jersey to support a range of affordable housing, infrastructure, and community development projects."},{id:"17",name:"Housing Choice Voucher Program",radius:10,color:"#dd3497",title:"Housing Choice Voucher Program",body:"The Housing Choice Voucher Program, commonly known as Section 8, assists low-income individuals and families in New Jersey by providing rental assistance vouchers that can be used towards affordable housing in the private market."},{id:"18",name:"Public Housing Agencies",radius:10,color:"#dd3497",title:"Public Housing Agencies",body:"Public Housing Agencies (PHAs) collaborate with HUD and the New Jersey Department of Community Affairs to administer affordable housing programs, including the Housing Choice Voucher Program (Section 8), and manage public housing developments to provide safe and affordable housing options for low-income individuals and families."},{id:"19",name:"Low-Income Housing Tax Credit",radius:10,color:"#dd3497",title:"Low-Income Housing Tax Credit",body:"The Low-Income Housing Tax Credit (LIHTC) in New Jersey is a federal program administered by the New Jersey Housing and Mortgage Finance Agency (NJHMFA) that provides tax incentives to developers to create affordable rental housing for low-income individuals and families, helping to increase the availability of affordable homes throughout the state."},{id:"20",name:"HOME Investment Partnerships Program",radius:10,color:"#dd3497",title:"HOME Investment Partnerships Program",body:"The HOME Investment Partnerships Program is a federal grant program that provides funding to state and local governments, including New Jersey, to support the creation and preservation of affordable housing for low-income households."},{id:"5",name:"Private Entities",radius:20,color:"#0570b0",title:"Private Entities",body:"Private entities contribute to affordable housing efforts by advocating for policy changes, providing expertise, and engaging in the development and preservation of affordable housing projects in New Jersey.",style:{fontWeight:"bold",fontSize:"18px"}},{id:"6",name:"Housing and Community Development Network of New Jersey",radius:10,color:"#3690c0",title:"Housing and Community Development Network of New Jersey",body:"The Housing and Community Development Network of New Jersey is a private entity that advocates for affordable housing, community development, and social equity, working with various stakeholders to promote policies and initiatives that address housing needs in the state."},{id:"7",name:"New Jersey Future",radius:10,color:"#3690c0",title:"New Jersey Future",body:"New Jersey Future is a nonprofit organization that focuses on sustainable development, including affordable housing, infrastructure, and land use policies, to create thriving and equitable communities in New Jersey."},{id:"8",name:"Affordable Housing Professionals of New Jersey",radius:10,color:"#3690c0",title:"Affordable Housing Professionals of New Jersey",body:"The Affordable Housing Professionals of New Jersey is an association of industry professionals dedicated to promoting affordable housing opportunities and fostering collaboration among stakeholders involved in affordable housing development and policy."},{id:"9",name:"Fair Share Housing Center",radius:10,color:"#3690c0",title:"Fair Share Housing Center",body:"The Fair Share Housing Center is a nonprofit organization that advocates for fair housing practices and works to ensure that municipalities in New Jersey comply with their affordable housing obligations under the Mount Laurel Doctrine.",style:{fontWeight:"bold",fontSize:"16px"}},{id:"14",name:"Developers",radius:10,color:"#3690c0",title:"Developers",body:"Developers play a crucial role in affordable housing by constructing, rehabilitating, and managing affordable housing projects, partnering with government agencies, nonprofits, and private entities to provide safe and affordable homes for low-income individuals and families."},{id:"10",name:"Mount Laurel Doctrine",radius:20,color:"#238443",title:"Mount Laurel Doctrine",body:"The Mount Laurel Doctrine, established by the New Jersey Supreme Court, mandates that municipalities provide their fair share of affordable housing and ensure that zoning and land-use policies do not perpetuate exclusionary practices, promoting socioeconomic diversity and access to affordable homes across the state.",style:{fontWeight:"bold",fontSize:"18px"}},{id:"11",name:"Builder's Remedy",radius:10,color:"#41AB5D",title:"Builder's Remedy",body:"Builder's Remedy is a legal provision derived from the Mount Laurel Doctrine, allowing developers to address the lack of affordable housing by constructing affordable units as part of their development projects and fulfilling their fair share obligation."},{id:"12",name:"Rounds of Obligation",radius:10,color:"#41AB5D",title:"Rounds of Obligation",body:"Rounds of Obligation refer to periodic cycles in which the New Jersey Department of Community Affairs determines the affordable housing obligations for municipalities, ensuring that they continually address their fair share responsibilities and provide affordable housing opportunities."}],links:[{source:"1",target:"2",value:2},{source:"1",target:"3",value:2},{source:"1",target:"4",value:2},{source:"1",target:"9",value:2},{source:"1",target:"13",value:2},{source:"1",target:"15",value:2},{source:"1",target:"18",value:2},{source:"2",target:"17",value:1},{source:"5",target:"6",value:1},{source:"5",target:"7",value:1},{source:"5",target:"8",value:1},{source:"5",target:"9",value:1},{source:"5",target:"14",value:1},{source:"10",target:"11",value:1},{source:"10",target:"12",value:1},{source:"10",target:"9",value:1},{source:"10",target:"1",value:1},{source:"11",target:"14",value:1},{source:"15",target:"16",value:1},{source:"15",target:"17",value:1},{source:"15",target:"19",value:1},{source:"15",target:"20",value:1},{source:"19",target:"3",value:1}]},barData:[{label:"Mt. Laurel Projections",value:305504,color:"#ae017e"},{label:"What we have",value:206083,color:"#238443"},{label:"What we need",value:797109,color:"#cc4c02"}],visibleBars:[!0,!0,!0],fullPageOptions:{normalScrollElements:".map-container"}}},computed:{destinationIndex(){return this.destination.index}},methods:{async handleHousingDataModal({municipalityName:e,munCode:t}){this.$refs.housingDataModal.modalTitle=e;const a="/affordable-housing-viz-2/",o=await j.gyn(`${a}/data-csvs/Municipal-level-housing-data.csv`),i=o.filter((e=>e.comuMerged===t));this.modalFields=[{key:"development / aka",label:"Development"},{key:"units",label:"Units"},{key:"type",label:"Type"},{key:"tenure",label:"Tenure"},{key:"agent",label:"Agent"},{key:"agent address",label:"Agent Address"},{key:"website",label:"Website"},{key:"source",label:"Source"},{key:"zip",label:"ZIP"},{key:"combinedPhone",label:"Phone"}],this.$refs.housingDataModal.updateItems(i),this.$refs.housingDataModal.showModal(),this.showModal=!0},onSectionLeave(e,t,a){console.log("destination:",t),console.log("destination.index:",t.index),4===t.index||5===t.index||6===t.index?(this.showMap=!0,this.isMapVisible=!0,this.showMapOverlay=!0):(this.showMap=!1,this.isMapVisible=!1,this.showMapOverlay=!1),this.destination.index=t.index}}};const Ke=(0,C.Z)(Ze,[["render",b],["__scopeId","data-v-21e356da"]]);var Qe=Ke;a(6744);(0,o.ri)(Qe).mount("#app")}},t={};function a(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,o,i,n){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],i=e[c][1],n=e[c][2];for(var s=!0,l=0;l<o.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(e){return a.O[e](o[l])}))?o.splice(l--,1):(s=!1,n<r&&(r=n));if(s){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,i,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,n,r=o[0],s=o[1],l=o[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(i in s)a.o(s,i)&&(a.m[i]=s[i]);if(l)var c=l(a)}for(t&&t(o);d<r.length;d++)n=r[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},o=self["webpackChunkhousing_viz_prj"]=self["webpackChunkhousing_viz_prj"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(382)}));o=a.O(o)})();
//# sourceMappingURL=app.8a836cbe.js.map